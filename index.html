<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devrim Öncü | Senior Android Architect</title>
    <meta name="description" content="Senior Android Developer Devrim Öncü. SpeakEasy ve Futbol Analiz uygulamaları. Veri odaklı mobil çözümler.">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --primary: #38bdf8;
            --accent: #f472b6;
            --text-main: #e2e8f0;
            --success: #22c55e;
        }
        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Segoe UI', sans-serif;
            margin: 0; padding: 0;
            line-height: 1.6;
        }
        /* Header */
        header {
            padding: 20px 5%;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); }
        .nav-btn { border: 1px solid var(--primary); color: var(--primary); padding: 8px 20px; border-radius: 20px; text-decoration: none; transition:0.3s;}
        .nav-btn:hover { background: var(--primary); color: var(--bg-dark); }

        /* Hero */
        .hero { text-align: center; padding: 60px 20px; max-width: 800px; margin: 0 auto; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 10px; }
        
        /* Stats Bar */
        .stats-bar { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin: 40px 0; }
        .stat-card { background: var(--card-bg); padding: 15px 30px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); text-align: center; min-width: 120px; }
        .stat-number { font-size: 1.5rem; font-weight: bold; color: var(--success); display: block; }
        .stat-label { font-size: 0.85rem; color: #94a3b8; }

        /* Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; padding: 20px 5%; max-width: 1200px; margin: 0 auto; }
        .product-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .product-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .card-header { height: 120px; background: linear-gradient(45deg, #1e293b, #0f172a); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--primary); }
        .card-body { padding: 25px; }
        .card-title { margin: 0 0 10px 0; color: white; }
        .live-stats { display: flex; justify-content: space-between; font-size: 0.8rem; color: #94a3b8; margin: 15px 0; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; }
        .price-tag { font-size: 1.5rem; font-weight: bold; color: white; }
        .buy-btn { display: block; width: 100%; padding: 12px; background: var(--primary); color: var(--bg-dark); text-align: center; text-decoration: none; font-weight: bold; border-radius: 10px; cursor: pointer; border: none; font-size: 1rem; }
        .buy-btn:hover { background: var(--accent); color: white; }
    </style>
</head>
<body>

    <header>
        <div class="logo">DEV.ÖNCÜ</div>
        <a href="mailto:devrimoncu6278@gmail.com" class="nav-btn">İletişim</a>
    </header>

    <section class="hero">
        <h1>Android Ekosistemi<br><span style="color:var(--primary)">Digital Portfolio</span></h1>
        
        <div class="stats-bar">
            <div class="stat-card">
                <span class="stat-number" id="global-downloads">...</span>
                <span class="stat-label">Toplam İndirme</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="global-views">...</span>
                <span class="stat-label">Görüntülenme</span>
            </div>
        </div>
    </section>

    <div class="grid">
        
        <article class="product-card">
            <div class="card-header"><i class="fas fa-language"></i></div>
            <div class="card-body">
                <h3 class="card-title">SpeakEasy AI</h3>
                <p style="color:#94a3b8; font-size:0.9rem;">Yapay zeka destekli İngilizce asistanı.</p>
                
                <div class="live-stats">
                    <span id="view-speakeasy"><i class="fas fa-spinner fa-spin"></i> Yükleniyor</span>
                    <span id="down-speakeasy">...</span>
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span class="price-tag" id="price-speakeasy">$...</span>
                </div>

                <button class="buy-btn" onclick="buyProduct('speakeasy')">Satın Al / İndir</button>
            </div>
        </article>

        <article class="product-card">
            <div class="card-header"><i class="fas fa-futbol"></i></div>
            <div class="card-body">
                <h3 class="card-title">Pro Football Analyzer</h3>
                <p style="color:#94a3b8; font-size:0.9rem;">Kapsamlı maç ve oyuncu veri analizi.</p>
                
                <div class="live-stats">
                    <span id="view-football"><i class="fas fa-spinner fa-spin"></i> Yükleniyor</span>
                    <span id="down-football">...</span>
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span class="price-tag" id="price-football">$...</span>
                </div>

                <button class="buy-btn" onclick="buyProduct('football')">Satın Al / İndir</button>
            </div>
        </article>

    </div>

    <script type="module">
        // Firebase CDN Linkleri (npm yerine bunları kullanıyoruz)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // SİZİN CONFIG BİLGİLERİNİZ
        const firebaseConfig = {
            apiKey: "AIzaSyAF2euAAbPEyOuVzsDT-EVm7k64Py1WNAk",
            authDomain: "devrimoncu-web.firebaseapp.com",
            projectId: "devrimoncu-web",
            storageBucket: "devrimoncu-web.firebasestorage.app",
            messagingSenderId: "500535246792",
            appId: "1:500535246792:web:3118c2d180443513b60afd"
        };

        // Uygulamayı Başlat
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- VERİ ÇEKME FONKSİYONU ---
        async function loadData() {
            // SpeakEasy Verisi
            await updateUI("speakeasy");
            // Football Verisi
            await updateUI("football");
        }

        async function updateUI(productId) {
            const docRef = doc(db, "products", productId);
            const docSnap = await getDoc(docRef);

            if (docSnap.exists()) {
                const data = docSnap.data();
                // HTML'i Güncelle
                document.getElementById(`price-${productId}`).innerText = "$" + data.price;
                document.getElementById(`view-${productId}`).innerText = data.views + " Bakıldı";
                document.getElementById(`down-${productId}`).innerText = data.downloads + " İndirme";
                
                // Ana Sayfa Sayaçlarını Güncelle (Basit toplama mantığı)
                updateGlobalStats();
            } else {
                console.log(productId + " verisi bulunamadı, otomatik oluşturuluyor...");
                // Eğer veritabanı boşsa otomatik oluştur
                await createInitialData(productId);
            }
        }

        // --- SATIN ALMA SİMÜLASYONU ---
        window.buyProduct = async (productId) => {
            const btn = event.target;
            btn.innerText = "İşleniyor...";
            
            try {
                const productRef = doc(db, "products", productId);
                // İndirme sayısını 1 artır
                await updateDoc(productRef, {
                    downloads: increment(1)
                });
                
                // Ekranı güncelle
                await updateUI(productId);
                alert("Teşekkürler! Satın alma başarılı. (Veritabanı güncellendi)");
                btn.innerText = "Satın Al / İndir";
            } catch (error) {
                console.error("Hata:", error);
                alert("İşlem sırasında hata oluştu: " + error.message);
            }
        }

        // --- YARDIMCI: VERİTABANI BOŞSA DOLDUR ---
        async function createInitialData(productId) {
            try {
                await setDoc(doc(db, "products", productId), {
                    price: "4.99",
                    views: 100,
                    downloads: 0
                });
                // Oluşturduktan sonra ekranı yenile
                updateUI(productId);
            } catch (e) {
                console.error("Veri oluşturma hatası: ", e);
            }
        }

        function updateGlobalStats() {
            // Basitçe şimdilik statik gösterelim, veri geldikçe burayı da bağlayabiliriz
            document.getElementById('global-downloads').innerText = "1.5K+"; 
            document.getElementById('global-views').innerText = "5.2K+";
        }

        // Sayfa açıldığında çalıştır
        loadData();
    </script>
</body>
</html>
